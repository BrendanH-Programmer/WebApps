<%- include("../partials/header") %>

<h2>Edit Patient</h2>
<form action="/patients/<%= patient._id %>?_method=PUT" method="POST">
  <label>Title:
    <select name="title" required>
      <option value="">Select</option>
      <option value="Mr" <%= patient.title === "Mr" ? "selected" : "" %>>Mr</option>
      <option value="Mrs" <%= patient.title === "Mrs" ? "selected" : "" %>>Mrs</option>
      <option value="Miss" <%= patient.title === "Miss" ? "selected" : "" %>>Miss</option>
      <option value="Ms" <%= patient.title === "Ms" ? "selected" : "" %>>Ms</option>
      <option value="Dr" <%= patient.title === "Dr" ? "selected" : "" %>>Dr</option>
      <option value="Prof" <%= patient.title === "Prof" ? "selected" : "" %>>Prof</option>
      <option value="Mx" <%= patient.title === "Mx" ? "selected" : "" %>>Mx</option>
    </select>
  </label>

  <label>First Name: <input type="text" name="firstName" value="<%= patient.firstName %>" required></label>
  <label>Surname: <input type="text" name="surname" value="<%= patient.surname %>" required></label>
  <label>Age: <input type="number" name="age" value="<%= patient.age %>" required></label>

  <fieldset>
    <legend>Select Symptoms</legend>
    <% symptomList.forEach(symptom => { %>
      <label>
        <input type="checkbox" name="symptoms" value="<%= symptom.name %>" 
          <%= patient.symptoms.includes(symptom.name) ? 'checked' : '' %>>
        <%= symptom.name %> (Risk: <%= symptom.riskValue %>)
      </label><br>
    <% }) %>
  </fieldset>

  <button type="submit">Update Patient</button>
</form>

<%- include("../partials/footer") %>
